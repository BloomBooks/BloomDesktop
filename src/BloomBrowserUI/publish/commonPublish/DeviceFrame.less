// didn't help with the Bloom vs. modern browser disparity (see  &:after below)
// : @import "../../node_modules/normalize.css/normalize.css";
@import "../../bloomUI.less";

@phoneFeaturesColor: #ababab;
@bezelWidth: 10px;
@speaker-length : 80px; // prettier extension changes speakerLength to speakerlength. So weird.
@speakerHeight: 5px;

@scale: 20;
@buttonScale: 0.2;
// gets filled by the components children, if there are any

.deviceAndControls {
    display: flex;
    flex-direction: row;
}

.deviceFrame {
    --screenHeight: calc(16px * @scale);
    --screenWidth: calc(9px * @scale);

    background: rgb(241, 241, 241);
    box-sizing: content-box; // Our width & height are sizing the screen (the glass). All the bezel and stuff doesn't count.
    width: var(--screenWidth);
    height: var(--screenHeight);
    border-width: @bezelWidth;
    border-style: solid;
    border-color: #636363;
    border-top-width: 20px;
    border-bottom-width: 20px;
    border-radius: 15px;

    position: relative;
    flex-direction: column;
    flex-shrink: 0;

    display: flex !important;
    --scale: 1;

    &.orientation-button {
        --scale: @buttonScale;
        transform-origin: top;
        &.portrait {
            margin-right: -60px;
            margin-left: 100px;
            transform: translate(0, 65px) scale(@buttonScale);
        }
        &.landscape {
            transform: translate(0, 117px) rotate(-90deg /*counter clockwise*/)
                scale(@buttonScale);
        }
        &.disabled {
            opacity: 0.5;
        }
        .selectedOrientation {
            border: solid @bloom-blue; // @bloom-yellow;
            margin: -46px;
            width: 148%;
            height: 132%;
            border-radius: 18px;
            border-width: 7px;
        }
    }
    transition: all 200ms;
    &.portrait {
        &.fullSize {
            transform: translate(143px, 0);
        }
        iframe {
            border: none;
            width: 100%;
            height: 100%;
        }
    }
    &.landscape {
        transform-origin: top left;
        transform: translate(0, 200px /* down*/)
            rotate(-90deg /*counter clockwise*/) scale(var(--scale));

        iframe {
            height: (900% / 16); //  9/16
            width: (1600%/9); //  16/9
            flex-shrink: 0;
            border: none;
            transform-origin: top left;
            transform: rotate(90deg /* clockwise*/)
                translate(0, -200px + (2 * @bezelWidth));
        }
    }

    // speaker
    &:before {
        // NOTE: the commented-out bits here work in modern browsers, but not in Bloom 4.6's browser.
        --speakerWidth: ~"calc(var(--screenWidth) / 3)";
        width: calc(9px * @scale / 3); //var(--speakerWidth);
        height: @speakerHeight;
        margin-top: -12px;
        margin-left: calc(
            (9px * @scale / 2) - ((9px * @scale / 3) / 2)
        ); // ~"calc((var(--screenWidth)/2) - (var(--speakerWidth)/2))";
        border-radius: @speakerHeight;
        background-color: @phoneFeaturesColor;
        content: "";
        position: absolute;
    }
}
