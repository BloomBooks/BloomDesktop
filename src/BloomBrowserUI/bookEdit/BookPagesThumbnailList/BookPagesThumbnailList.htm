<!DOCTYPE html>
<!-- including the lang attribute is causing css problems with settingsCollectionStyles.css -->
<!-- <html lang="en"> -->
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="bookEdit/editor/gridly version/jquery.gridly.css" />
    <script src="http://localhost:8089/bloom/bookEdit/editor/gridly version/jquery-2.0.3.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://localhost:8089/bloom/bookEdit/editor/gridly version/jquery.gridly.js"></script>
    <script>
        var reorder = function (elements) {
            var ids = "";
            elements.each(function () {
                var id = $(this).attr('id');
                if (id)
                    ids += "," + id;
            });
            fireCSharpEvent("gridReordered", ids);
        };
        jQuery(document).ready(function () {
            $('.gridly').gridly({
                base: 35, // px
                gutter: 10, // px
                columns: 4,
                callbacks: {
                    reordered: reorder
                }
            });
            jQuery('.gridItem').click(function () {
                fireCSharpEvent("gridClick", $(this).attr('id'));
            });
        });
        function fireCSharpEvent(eventName, eventData) {

            var event = new MessageEvent(eventName, { 'view': window, 'bubbles': true, 'cancelable': true, 'data': eventData });
            document.dispatchEvent(event);
        }
    </script>
    <title></title>
    <style>
        body { background-color: DarkGray; }

        /* http://stackoverflow.com/questions/17824060/ios-safari-runs-out-of-memory-with-webkit-transform */
        .pageContainer { transform-style: preserve-3d; }
        .pageContainer div.bloom-page { backface-visibility: hidden; }

        .pageContainer {
            padding: 3px;
            box-sizing: border-box;
            overflow: hidden;
            display: inline-block;
            height: 65px; width: 47px; /* default = A5Portrait */
        }

        .gridSelected .pageContainer { padding: 1px; border: 2px solid rgb(255, 255, 163); }

        .pageContainer.A5Landscape { height: 51px; width: 69px; }
        .pageContainer.A4Portrait { height: 62px; width: 46px; }
        .pageContainer.A4Landscape { height: 54px; width: 74px; }
        .pageContainer.B5Portrait { height: 63px; width: 46px; }

        div.bloom-page { transform-origin: left top; }
        .pageContainer div.bloom-page { transform: scale(0.074); } /* default = A5Portrait */
        .pageContainer.A5Landscape div.bloom-page { transform: scale(0.08); }
        .pageContainer.A4Portrait div.bloom-page { transform: scale(0.05); }
        .pageContainer.A4Landscape div.bloom-page { transform: scale(0.061); }
        .pageContainer.B5Portrait div.bloom-page { transform: scale(0.06); }

        .gridly { position: relative; }

        div.gridItem {
            width: 80px;
            height: 100px;
            opacity: 1;
            overflow:hidden;
        }

        /* div.gridItem.dragging { opacity: .8; } */
        div.thumbnailCaption {
            position: absolute;
            top: 61px;
            color: white;
            overflow: hidden;
            text-align:right;
            width: 80px;
        }
        div.gridItem:nth-child(even) div.thumbnailCaption { text-align: left; }
        div.gridItem:nth-child(odd) div.pageContainer { float: right; }
        div.placeholder { pointer-events: none; }
    </style>
</head>
<body id="body">
<div class="gridly">
    <div class="gridItem placeholder" id="placeholder"></div>
</div>
</body>
</html>