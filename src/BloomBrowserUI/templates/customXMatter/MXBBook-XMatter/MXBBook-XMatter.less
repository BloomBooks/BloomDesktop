@import "../../xMatter/bloom-xmatter-common.less";

@XMatterPackName: "MXB Book";
@fontSize: 10pt;
@contentMarginBottom: 3em;
@contentMarginTop: 1em;
@contentAboveCCBuffer: 1em;
@contentBelowCCBuffer: 3em;
@contentMinimumHeight: 1em;

// moving the license and copyright block to a new place, it needs some top space
.licenseAndCopyrightBlock {
    margin-bottom: @contentMarginBottom;
}

.titlePage {
    // shrink this down from 3em because we're combining the title and credits pages
    #titlePageTitleBlock {
        margin-bottom: @contentMarginBottom;
    }
    // shrink things down even more if it's a small paper size
    &.A6Landscape,
    &.A6Portrait,
    &.QuarterLetterLandscape,
    &.QuarterLetterPortrait {
        #titlePageTitleBlock {
            margin-bottom: 0;
            div {
                margin-bottom: 0;
            }
        }
    }
}

// more scrunching
.titlePage {
    // default values for the Original Contriutions section
    .Contributions-style {
        font-size: @fontSize;
        display: block;
        margin-top: @contentBelowCCBuffer;
        margin-bottom: @contentMarginBottom;
    }
    // default values for the Localized Acknowledgments section
    .LocalizedAcknowledgments-style {
        font-size: @fontSize;
        display: block;
        margin-bottom: @contentMarginBottom;
    }
    // default values for the Funding section
    .Funding-style {
        font-size: @fontSize;
        display: block;
    }
    #funding {
        margin-bottom: @contentMarginBottom;
    }
}

.credits {
    #originalAcknowledgments .bloom-content1 {
        display: block;
        margin-bottom: @contentAboveCCBuffer;
    }
    #printingHistory .bloom-contentNational1 {
        display: block;
    }
    // default values for the National Language section
    .NationalLanguage-style {
        font-size: @fontSize;
        display: block;
        margin-bottom: @contentMarginBottom;
    }
    // default values for the Original Acknowledgments section
    .OriginalAcknowledgments-style {
        font-size: @fontSize;
        display: block;
    }
    // default values for the Printing History section
    .PrintingHistory-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
        margin-top: @contentMarginTop;
    }
}

.insideBackCover {
    .marginBox {
        // Set the default style for the new Printer's Statement
        // The text should be center aligned at the bottom of the available space.  (An earlier
        // version of this code used .bloom-editable:only-child and .bloom-editable:not(:only-child)
        // in a confusing and ineffective way that had the side-effect of displaying vernacular as
        // well as national language data here, and also didn't push the text to the bottom of the
        // available space.  See http://issues.bloomlibrary.org/youtrack/issue/BL-4614.)
        .Printer-Statement-style.bloom-editable.bloom-visibility-code-on {
            // display:flex is needed for justify-content:flex-end to apply
            display: flex; // has been reset to block by .bloom-editable.bloom-visibility-code-on
            flex-direction: column; // stack paragraphs in a column
            justify-content: flex-end; // push text to the bottom of the available space
            padding-bottom: 20px;
            text-align: center;
            font-size: @fontSize;
            line-height: 1.2;
        }
        // Allow the two .bloom-translationGroup boxes contained in the .marginBox box to flex
        // vertically.  They start out sharing the page 50-50, but the summary (or I suppose the
        // printer statement) can take more space if needed.
        display: flex;
        flex-direction: column;
    }
}

// override .bloom-content1 min-height 3em from bloom-xmatter-common.less
body[bookcreationtype="original"] {
    .titlePage {
        #languageInformation {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-bottom: @contentMarginBottom;
            }
        }
        #contributions {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-top: @contentBelowCCBuffer;
                margin-bottom: @contentMarginBottom;
            }
        }
        #localizedAcknowledgments {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-top: @contentMarginTop;
                margin-bottom: @contentMarginBottom;
            }
        }
        #funding {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-top: @contentMarginTop;
                margin-bottom: @contentMarginBottom;
            }
        }
    }
}

// override .bloom-contentNational1 min-height 3em from bloom-xmatter-common.less
body[bookcreationtype="translation"] {
    .titlePage {
        #languageInformation {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-bottom: @contentMarginBottom;
            }
        }
        #Contributions {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-top: @contentBelowCCBuffer;
                margin-bottom: @contentMarginBottom;
            }
        }
        #localizedAcknowledgments {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-top: @contentMarginTop;
                margin-bottom: @contentMarginBottom;
            }
        }
        #funding {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
                margin-top: @contentMarginTop;
            }
        }
    }
}
