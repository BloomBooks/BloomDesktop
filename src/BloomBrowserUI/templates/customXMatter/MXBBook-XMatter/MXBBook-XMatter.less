@import "../../xMatter/bloom-xmatter-common.less";

@XMatterPackName: "MXB Book";
@fontSize: 10pt;
@MarginBetweenMajorItems: 3em;
@contentMinimumHeight: 1em;

// trying to snug things up a bit around the license
.credits .licenseAndCopyrightBlock {
    margin-bottom: 0;
    .copyright,
    .licenseBlock {
        margin-bottom: @contentMinimumHeight;
    }
}

.titlePage {
    // shrink this down from 3em because we're combining the title and credits pages
    #titlePageTitleBlock {
        margin-bottom: @MarginBetweenMajorItems;
    }
    // shrink things down even more if it's a small paper size
    &.A6Landscape,
    &.A6Portrait,
    &.QuarterLetterLandscape,
    &.QuarterLetterPortrait {
        #titlePageTitleBlock {
            margin-bottom: 0;
            div {
                margin-bottom: 0;
            }
        }
    }
}

// more scrunching
.titlePage {
    // default values for the Original Contriutions section
    .OriginalContributions-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
        margin-bottom: @MarginBetweenMajorItems;
        margin-top: @MarginBetweenMajorItems;
    }
    // default values for the Localized Acknowledgments section
    .LocalizedAcknowledgments-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
        margin-bottom: @MarginBetweenMajorItems;
    }
    // default values for the Funding section
    .Funding-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
        margin-bottom: @MarginBetweenMajorItems;
    }
    // scrunch things down as much as possible
    .bloom-contentNational1,
    .bloom-content1 {
        margin-bottom: 0.5em;
    }
}

.credits {
    // default values for the National Language section
    .NationalLanguage-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
        margin-bottom: @MarginBetweenMajorItems;
    }
    // default values for the Original Acknowledgments section
    .OriginalAcknowledgments-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
        margin-bottom: @MarginBetweenMajorItems;
    }
    // default values for the Printing History section
    .PrintingHistory-style.bloom-contentNational1 {
        font-size: @fontSize;
        display: block;
    }
    // scrunch things down as much as possible
    .bloom-contentNational1,
    .bloom-content1 {
        margin-bottom: 0.5em;
    }
}

.insideBackCover {
    .marginBox {
        // Set the default style for the new Printer's Statement
        // The text should be center aligned at the bottom of the available space.  (An earlier
        // version of this code used .bloom-editable:only-child and .bloom-editable:not(:only-child)
        // in a confusing and ineffective way that had the side-effect of displaying vernacular as
        // well as national language data here, and also didn't push the text to the bottom of the
        // available space.  See http://issues.bloomlibrary.org/youtrack/issue/BL-4614.)
        .Printer-Statement-style.bloom-editable.bloom-visibility-code-on {
            // display:flex is needed for justify-content:flex-end to apply
            display: flex; // has been reset to block by .bloom-editable.bloom-visibility-code-on
            flex-direction: column; // stack paragraphs in a column
            justify-content: flex-end; // push text to the bottom of the available space
            padding-bottom: 20px;
            text-align: center;
            font-size: @fontSize;
            line-height: 1.2;
        }
        // Allow the two .bloom-translationGroup boxes contained in the .marginBox box to flex
        // vertically.  They start out sharing the page 50-50, but the summary (or I suppose the
        // printer statement) can take more space if needed.
        display: flex;
        flex-direction: column;
    }
}

// override .bloom-content1 min-height 3em from bloom-xmatter-common.less
body[bookcreationtype="original"] {
    .titlePage {
        #languageInformation {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
        #contributions {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
        #localizedAcknowledgments {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
        #funding {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
    }
}

// override .bloom-contentNational1 min-height 3em from bloom-xmatter-common.less
body[bookcreationtype="translation"] {
    .titlePage {
        #languageInformation {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
        #contributions {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
        #localizedAcknowledgments {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
        #funding {
            .bloom-content1 {
                min-height: @contentMinimumHeight;
            }
        }
    }
}

.Credits-Page-style .languagesOfBook {
    font-size: 14pt;
    font-weight: bold;
    width: 100%;
    text-align: center;
}
