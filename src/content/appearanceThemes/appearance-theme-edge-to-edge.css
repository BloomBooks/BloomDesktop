/* Edge-to-edge uses no margins on numbered content pages.
Front and back matter keep a small margin for readability.
Page-number visibility comes from appearance.json, not from this theme file. */

.bloom-frontMatter,
.bloom-backMatter {
    --page-margin: 3mm;
}

/* This statement sets the margins on the numbered content pages */

.numberedPage:not(.bloom-interactive-page) {
    --page-margin: 0mm;

    /* instead of a gap, we are using padding because the text should look centered between the image and edge of the screen */
    --page-verticalSplit-width: 0mm; /* we don't need this; removing it makes it simpler to just have the same spacing on left and right sides */
    --page-horizontalSplit-height: 0mm;
}

/* The section below controls the page number and the white circle around it.  */
.Device16x9Landscape.numberedPage {
    --pageNumber-extra-height: 0mm !important; /* we put the page number on top of the image so we don't need a margin boost */
}
.Device16x9Portrait.numberedPage {
    /* this rule will apply more generally than we'd prefer, but the common situation we're improving here
    is picture on top, text on the bottom, we need to make room for the page number */
    --pageNumber-extra-height: 12mm !important;
}
/* Full-bleed non-landscape layouts use the generic side-left/side-right badge selectors.
Landscape layouts have additional overrides below for picture-side placement. */
.bloom-fullBleed .numberedPage.side-left::after {
    /* Full-bleed output adds trim overhang; offset the badge toward the trim box. */
    --pageNumber-left-margin: calc(
        var(--page-margin-left, 0mm) + (var(--full-bleed-excess-width, 0mm) / 2)
    );
}
.bloom-fullBleed .numberedPage.side-right::after {
    /* Mirror the full-bleed offset for right-side page numbers. */
    --pageNumber-right-margin: calc(
        var(--page-margin-right, 0mm) +
            (var(--full-bleed-excess-width, 0mm) / 2)
    );
}
.bloom-fullBleed .Device16x9Landscape.numberedPage {
    /* On full-bleed pages we want the page number positioned based on the ideal place where
       the page should be trimmed, not the actual edge of the page.  Only the left (or right)
       edge needs to be adjusted.  The bottom edge is already situated properly, probably
       because the --full-bleed-excess-height variable calculates out to 0mm. (BL-15611) */
    --pageNumber-full-bleed-extra-margin: calc(
        var(--full-bleed-excess-width) / 2
    );
}
.Device16x9Landscape.numberedPage::after {
    --pageNumber-bottom: 0mm;
    --pageNumber-top: unset;
    --pageNumber-font-size: 11pt;

    border-radius: 50%;
    --pageNumber-background-color: #ffffff;
    --pageNumber-background-width: 33px;
    --pageNumber-always-left-margin: var(--page-margin-left);
    --pageNumber-right-margin: deliberately-invalid; /* prevents right being set at all. unset does not work. Prevent centering for this layout */
}
.bloom-fullBleed
    .Device16x9Landscape.numberedPage.pictureOnRight.pictureOnRight::after {
    /* Adjust the page number position for full bleed pages (BL-15611) */
    --pageNumber-right-margin: calc(
        var(--page-margin-right, 0mm) +
            (var(--full-bleed-excess-width, 0mm) / 2)
    );
}
.Device16x9Landscape.numberedPage.pictureOnRight.pictureOnRight::after {
    --pageNumber-right-margin: var(--page-margin-right);
    --pageNumber-left-margin: deliberately-invalid; /* prevents left being set at all. unset does not work. Prevent centering for this layout */
    --pageNumber-always-left-margin: deliberately-invalid; /* prevents left being set at all. unset does not work. Prevent centering for this layout */
}

/* using "where:" so that the user's custom appearance can override the theme if specified */
.numberedPage:where(:not(.bloom-interactive-page)) {
    --topLevel-text-padding: 0.5em;
}
.numberedPage:not(.bloom-interactive-page) {
    /* Keep the format button clear of the page-number badge in lower-left text layouts. */
    --formatButton-pageNumber-dodge: 20px;
}
